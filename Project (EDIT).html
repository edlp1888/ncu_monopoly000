<!DOCTYPE html>
<html lang="zh-TW">
	<head>
		<meta charset="utf-8" />
		<title>央央景點大富翁</title>
		<!-- EDIT (引入 jQuery) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
		<style>
			/*h1 {
				text-align: center;
				font-size: 50px;
			}*/
			body {
				/*background-color: rgba(255, 255, 255, 0.2);*//*遮罩*/
				background-blend-mode: multiply;
				background-image: url("img/hello.jpg");
				background-repeat: no-repeat;
				background-size: cover;
			}
			table {
				border-collapse: collapse;
				width: 50%; /* EDIT (減少寬度) */
			}
			th {
				background-color: rgba(255, 255, 255, 0.6);
				font-size: 12px; /* EDIT (縮小字體) */
				color: rgb(4, 51, 22);
			}
			td {
				background-color: rgba(255, 255, 255, 0.8);
				text-align: center;
				padding-left:20px; /* EDIT (減少寬度和高度) */
				padding-top: 20px; /* EDIT (減少寬度和高度) */
				padding-bottom: 20px; /* EDIT (減少寬度和高度) */
				padding-right: 20px; /* EDIT (減少寬度和高度) */
				/*padding: 0px;*/
				border-width: 4px;
				text-decoration: underline;
				text-decoration-color: black;
				font-size: 12px; /* EDIT (縮小字體) */
				font-weight: 800;
			}
			/* EDIT (屬於 stage 這個 class 的 div 的外觀) */
			.stage {
				width: 50%;
				margin: 50px auto 50px auto;
				border: 2px solid black;
			}
		</style>
	</head>
	<body>
		<!-- EDIT (用於擲骰子的按鈕) -->
		<!-- <button id="dice_button">擲骰子</button> -->

		<!---<h1>央央大富翁</h1>-->
		<table border="1">
			<tr>	
				<!--<th colspan="2"></th>-->
				<td>1.中大圓環(起點)</td>
				<td><!---2.大象雕塑--><img src="img/大象五行.png" width="100%" height="100%"></td>
				<td><!---3.男九垃圾場--><img src="img/小木屋.png" width="100%" height="100%"></td>
				<td><!---4.小木屋--><img src="img/小木屋.png" width="100%" height="100%"></td>
				<td>5.中大湖(命運)</td>
			</tr>
			<tr>
				<td>16.觀景台</td>
				<th colspan="3", rowspan="3">歡迎來到<br>\央央大富翁/</th>
				<td>6.壘球場</td>
			</tr>
			<!--<tr><td colspan="5">48 months</td></tr>-->
			<!--<tr><td rowspan="4">iphone 15</td></tr>-->
			<tr>
				<td ><!---15.太極銅雕--><img src="img/太極銅雕.png" width="100%" height="100%"></td>
				<td>7.依仁堂</td>
			</tr>
			<tr>
				<td><!---14.校史館--><img src="img/大講堂.png" width="100%" height="100%"></td>
				<td>8.Oloo</td>
			</tr>
			<tr>
				<td><!---13.游藝館(機會)--><img src="img/游藝館.png" width="100%" height="100%"></td>
				<td>12.百花川</td>
				<td>11.宵夜街</td>
				<td>10.女生宿舍</td>
				<td>9.松苑餐廳</td>
			</tr>
		</table>

		<!-- EDIT (用來顯示每一格的關卡) -->
		<div>
			<!-- EDIT (position_0_cycle_0 代表第一次走到第一格(起點)時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_0_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p>歡迎來到第一格:中央大學正門(答案是選項1，答對加10分，答錯扣10分)</p>
				<input class="position_0_cycle_0_button" type="button" value="選項1">
				<input class="position_0_cycle_0_button" type="button" value="選項2">
				<input class="position_0_cycle_0_button" type="button" value="選項3">
			</div>
			<!-- EDIT (position_1_cycle_0 代表第一次走到第二格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_1_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<p>你到了一棟看起來很氣派的大樓，聽說這裡面常常會有不同的團隊進行演出，除此之外，裡面也有一間小小的咖啡廳販賣各種輕食，是文院同學常常造訪的地點。</p>
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p>歡迎來到第二格:黑盒子</p>
				<p>不過，旁邊草地上的雕像到底是什麼呢？</p>
				<input class="position_1_cycle_0_button" type="button" value="A:青蛙">
				<input class="position_1_cycle_0_button" type="button" value="B:大象">
				<input class="position_1_cycle_0_button" type="button" value="C:兔子">
			</div>
			<!-- EDIT (position_2_cycle_0 代表第一次走到第二格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_2_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p>眼前出現了一隻貓咪，跟隨他的身影，你進入了⋯垃圾場。</p>
				<p>歡迎來到第三格:垃圾場</p>
				<p>眼前的垃圾看起來都沒有經過分類，這時候你決定</p>
				<input class="position_2_cycle_0_button" type="button" value="同流合汙">
				<input class="position_2_cycle_0_button" type="button" value="乖乖分類">
			</div>
			<!-- EDIT (position_3_cycle_0 代表第一次走到第三格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_3_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p>沿著路走，你被一股甜甜的香氣吸引，停下了腳步......</p>
				<p>歡迎來到第四格:小木屋鬆餅</p>
				<input class="position_3_cycle_0_button" type="button" value="同流合汙">
				<input class="position_3_cycle_0_button" type="button" value="乖乖分類">
			</div>
			<!-- EDIT (position_4_cycle_0 代表第一次走到第4格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_4_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_4_cycle_0_button" type="button" value="">
				<input class="position_4_cycle_0_button" type="button" value="">
				<input class="position_4_cycle_0_button" type="button" value="">
				</div>
			<!-- EDIT (position_5_cycle_0 代表第一次走到第5格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_5_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_5_cycle_0_button" type="button" value="">
				<input class="position_5_cycle_0_button" type="button" value="">
				<input class="position_5_cycle_0_button" type="button" value="">
				</div>
			<!-- EDIT (position_6_cycle_0 代表第一次走到第6格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_0_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_6_cycle_0_button" type="button" value="">
				<input class="position_6_cycle_0_button" type="button" value="">
				<input class="position_6_cycle_0_button" type="button" value="">
				</div>
			<!-- EDIT (position_7_cycle_0 代表第一次走到第7格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_7_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_7_cycle_0_button" type="button" value="">
				<input class="position_7_cycle_0_button" type="button" value="">
				<input class="position_7_cycle_0_button" type="button" value="">
				</div>
			<!-- EDIT (position_0_cycle_0 代表第一次走到第8格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_0_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_0_cycle_0_button" type="button" value="">
				<input class="position_0_cycle_0_button" type="button" value="">
				<input class="position_0_cycle_0_button" type="button" value="">
				</div>
			<!-- EDIT (position_0_cycle_0 代表第一次走到第9格時要顯示的關卡) -->
			<!-- EDIT (style 可以自己調整，但 display: none 一定要寫，剛開始所有關卡都是隱藏的，走到對應格子時再顯示關卡) -->
			<div class="stage" id="position_0_cycle_0" style="display: none;">
				<!-- EDIT (把這一關需要的元件都寫在這裡) -->
				<!-- EDIT (其中選項按鈕要屬於同一個 class) -->
				<p></p>
				<input class="position_0_cycle_0_button" type="button" value="">
				<input class="position_0_cycle_0_button" type="button" value="">
				<input class="position_0_cycle_0_button" type="button" value="">
			<!-- EDIT (剩下的關卡可以如法炮製) -->
		</div>
	</body>
	<script type="text/javascript">
		$(document).ready(function() {
			let score = 0;    // EDIT (得到的分數)
			let position = 0; // EDIT (現在在第幾格 (0~15))
			let cycle = 0;    // EDIT (現在是第幾圈)
			let round = 10;  // EDIT (總共擲 10 次骰子)

			function doIteration(currentRound, totalRound) {
				return new Promise(resolve => {
					if (currentRound < totalRound)
					{
						// EDIT (擲骰子並更新位置和圈數，但在起點時不擲骰子)
						// EDIT (應該要先按「擲骰子」的按鈕，按按鈕之後再隨機產生骰子的點數，但先跳過這個)
						if (currentRound > 0)
						{
							let dice = 1; // Math.floor(6 * Math.random()) + 1;
							position += dice;
							if (position >= 16)
							{
								cycle++;
								position %= 16;
							}
						}

						// EDIT (先把所有關卡隱藏起來)
						$(".stage").hide();

						// EDIT (根據現在的位置和圈數決定要顯示和執行哪一個關卡)
						if (position == 0)
						{
							if (cycle == 0) // EDIT (第一次到達第一格(起點))
							{
								// EDIT (把關卡的元件顯示出來)
								$("#position_0_cycle_0").show();
								// EDIT (偵測關卡的選項有被有被點擊)
								$(".position_0_cycle_0_button").one("click", function() {
									// EDIT (點擊選項後檢查是哪一個選項被點，並檢查點擊的選項是否為正確答案來更新分數)
									$(".position_0_cycle_0_button").off("click");
									let user_input = $(this).val();
									if (user_input == "選項1")
										score += 10;
									else
										score -= 10;
									alert(`score = ${score}`);
									// EDIT (進到下一輪)
									resolve(currentRound + 1);
								});
							}
							else if (cycle == 1)
							{
								// 第二次到起點要做的事情
							}
							else if (cycle == 2)
							{
								// 第三次到起點要做的事情
							}
						}
						else if (position == 1)
						{
							if (cycle == 0)
							{
								// EDIT (把關卡的元件顯示出來)
								$("#position_1_cycle_0").show();
								// EDIT (偵測關卡的選項有被有被點擊)
								$(".position_1_cycle_0_button").one("click", function() {
									// EDIT (點擊選項後檢查是哪一個選項被點，並檢查點擊的選項是否為正確答案來更新分數)
									$(".position_1_cycle_0_button").off("click");
									let user_input = $(this).val();
									if (user_input == "B:大象")
										score += 10;
									else
										score -= 10;
									alert(`score = ${score}`);
									// EDIT (進到下一輪)
									resolve(currentRound + 1);
								});
							}
							else if (cycle == 1)
							{
								// TODO
							}
							else if (cycle == 2)
							{
								// TODO
							}
						}
						else if (position == 2)
						{
							if (cycle == 0)
							{
								// EDIT (把關卡的元件顯示出來)
								$("#position_2_cycle_0").show();
								// EDIT (偵測關卡的選項有被有被點擊)
								$(".position_2_cycle_0_button").one("click", function() {
									// EDIT (點擊選項後檢查是哪一個選項被點，並檢查點擊的選項是否為正確答案來更新分數)
									$(".position_2_cycle_0_button").off("click");
									let user_input = $(this).val();
									if (user_input == "乖乖分類")
										score += 10;
									else
										score -= 10;
									alert(`score = ${score}`);
									resolve(currentRound + 1);
								});
							}
							else if (cycle == 1)
							{
								//TODO
							}
							else if (cycle == 2)
							{
								// TODO
							}

						}
						else if (position == 3)
						{
							if (cycle == 0)
							{
								// EDIT (把關卡的元件顯示出來)
								$("#position_3_cycle_0").show();
									alert(`哪裡來的%@$*想動我的蛋！`);
								<p>你被被烏秋媽媽攻擊了。</p>
								<p>你現在才發現，旁邊的告示牌寫著：鳥邱繁殖季，請快速通過。</p>
									// EDIT (進到下一輪)
									resolve(currentRound + 1);
								});
							}
							else if (cycle == 1)
							{
								alert(`又是你!`);
								<p>你被被烏秋媽媽攻擊了。</p>
									// EDIT (進到下一輪)
									resolve(currentRound + 1);
							}
							else if (cycle == 2)
							{
								score += 10;
								<p>對不起。</p>
								alert(`score = ${score}`);
								resolve(currentRound + 1);
							}

						}
						// EDIT (以此類推)
					}
						   else if (position == 5)//步數
						{
							if (cycle == 0)
							{
								// EDIT (把關卡的元件顯示出來)
								$("#position_5_cycle_0").show();
								// EDIT (偵測關卡的選項有被有被點擊)
								$(".position_5_cycle_0_button").one("click", function() {
									// EDIT (點擊選項後檢查是哪一個選項被點，並檢查點擊的選項是否為正確答案來更新分數)
									$(".position_5_cycle_0_button").off("click");
									let user_input = $(this).val();
									if (user_input == "看地板是否真的跟月球表面一樣")
									{	score -= 10;
									 	alert(`走路踩到坑洞跌倒，然後上課遲到，下次行動步數-1, score = ${score}`);
									}
									else if (user_input == "沒有要看地板，我對棒球隊有沒有帥哥比較有興趣")
									{
										score += 20;
										alert(`看到學長打出一個全壘打，直接被帥到，score = ${score}`);
									}
									else if (user_input == "趕課要緊 我才不看棒球勒")
									{		
										score += 10;
										alert(`你快步走過,很幸運沒有跌倒,下次行動步數+1，score = ${score}`);
									}
									else if (user_input == "人行道坑坑巴巴的，我要專心走路")
									{score += 25;
									alert(`很棒 你還記得中央的人行道很破，一不注意就會跌倒，score = ${score}`);
									}
									resolve(currentRound + 1);
								});
							}
					else
					{
						resolve();
					}
				});
			}

			async function iterate() {
				let currentRound = 0;
				const totalRound = 10;
				while (currentRound < totalRound)
					currentRound = await doIteration(currentRound, totalRound);
				// EDIT (把分數儲存到資料庫)
			}

			iterate();
		});
	</script>
</html>
